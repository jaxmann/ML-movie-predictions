var movies = ["The Voices", "Accidental Love", "Da Sweet Blood of Jesus", "Fifty Shades of Grey", "Kingsman: The Secret Service", "The Last 5 Years", "The Duff", "Hot Tub Time Machine 2", "McFarland, USA", "Everly", "Focus", "The Lazarus Effect", "Maps to the Stars", "Out of the Dark", "Bad Asses on the Bayou", "Chappie", "Road Hard", "The Second Best Exotic Marigold Hotel", "Unfinished Business", "Cinderella", "The Cobbler", "Cymbeline", "Home Sweet Hell", "It Follows", "Muck", "Run All Night", "Danny Collins", "The Divergent Series: Insurgent", "Do You Believe", "The Gunman", "Tracers", "The Walking Deceased", "Get Hard", "Home", "Serena", "While We\'re Young", "Furious 7", "Woman in Gold", "Ex Machina", "The Longest Ride", "Lost River", "1915", "Alex of Venice", "Beyond the Reach", "Child 44", "Monkey Kingdom", "Paul Blart: Mall Cop 2", "The Road Within", "True Story", "Unfriended", "Adult Beginners", "Blackbird", "Brotherly Love", "Just Before I Go", "Little Boy", "The Age of Adaline", "Avengers: Age of Ultron", "Far from the Madding Crowd", "The D Train", "Hot Pursuit", "Maggie", "Mad Max: Fury Road", "Pitch Perfect 2", "Poltergeist", "Tomorrowland", "When Marnie Was There", "Aloha", "San Andreas", "Spy", "Entourage", "Insidious: Chapter 3", "Love & Mercy", "Jurassic World", "Me and Earl and the Dying Girl", "Dope", "Inside Out", "Max", "Ted 2", "Terminator Genisys", "Minions", "Ant-Man", "Trainwreck", "Pixels", "The Vatican Tapes", "She\'s Funny That Way", "No Escape", "Agent 47", "Black Mass", "Everest", "War Pigs", "The Martian", "Room (2015 film)", "Crimson Peak", "The Peanuts Movie", "The Good Dinosaur", "Victor Frankenstein", "In the Heart of the Sea", "Concussion", "Daddy\'s Home", "Joy", "Point Break", "The Revenant", "Snowden", "The Forest", "Anesthesia", "Lamb", "Ride Along 2", "13 Hours: The Secret Soldiers of Benghazi", "Norm of the North", "The Benefactor", "Dirty Grandpa", "The 5th Wave", "The Boy", "Ip Man 3", "Synchronicity", "Kung Fu Panda 3", "The Finest Hours", "Fifty Shades of Black", "Jane Got a Gun", "Hail, Caesar!", "Pride + Prejudice + Zombies", "The Choice", "Deadpool", "Zoolander 2", "How to Be Single", "Risen", "The Witch", "Race", "Gods of Egypt", "Triple 9", "Eddie the Eagle", "Zootopia", "London Has Fallen", "Whiskey Tango Foxtrot", "The Other Side of the Door", "10 Cloverfield Lane", "The Young Messiah", "The Perfect Match", "Hello, My Name Is Doris", "Miracles from Heaven", "The Divergent Series: Allegiant", "The Bronze", "Midnight Special", "Batman v Superman: Dawn of Justice", "My Big Fat Greek Wedding 2", "I Saw the Light", "Everybody Wants Some!!", "God\'s Not Dead 2", "Meet the Blacks", "Miles Ahead", "The Boss", "Hardcore Henry", "Demolition", "The Invitation", "The Jungle Book", "Barbershop: The Next Cut", "Criminal", "Green Room", "The Huntsman: Winter\'s War", "A Hologram for the King", "Elvis & Nixon", "Keanu", "Mother\'s Day", "Ratchet & Clank", "Captain America: Civil War", "Money Monster", "The Darkness", "Love & Friendship", "The Angry Birds Movie", "Neighbors 2: Sorority Rising", "The Nice Guys", "X-Men: Apocalypse", "Alice Through the Looking Glass", "TMNT 2: Out of the Shadows", "Me Before You", "Popstar: Never Stop Never Stopping", "The Conjuring 2", "Warcraft", "Now You See Me 2", "Finding Dory", "Central Intelligence", "Independence Day: Resurgence", "The Shallows", "Free State of Jones", "The Neon Demon", "Title", "The Legend of Tarzan", "The BFG", "The Purge: Election Year", "The Secret Life of Pets", "Mike and Dave Need Wedding Dates", "Characterz", "The Infiltrator", "Ghostbusters", "Star Trek Beyond", "Ice Age: Collision Course", "Lights Out", "Jason Bourne", "Bad Moms", "Nerve", "Suicide Squad", "Nine Lives", "Pete\'s Dragon", "Sausage Party", "Florence Foster Jenkins", "Ben-Hur", "Kubo and the Two Strings", "War Dogs", "Mechanic: Resurrection", "Don\'t Breathe", "Hands of Stone", "The Light Between Oceans", "Morgan", "Sully", "When the Bough Breaks", "The Wild Life", "The Disappointments Room", "Bridget Jones\'s Baby", "Snowden", "Blair Witch", "Hillsong: Let Hope Rise", "The Magnificent Seven", "Storks", "South of 8", "Miss Peregrine\'s Home for Peculiar Children", "Deepwater Horizon", "Masterminds", "Title", "The Girl on the Train", "The Birth of a Nation", "Middle School: The Worst Years of My Life", "The Accountant", "Kevin Hart: What Now?", "Max Steel", "Jack Reacher: Never Go Back", "Keeping Up with the Joneses", "Ouija: Origin of Evil", "Boo! A Madea Halloween", "I\'m Not Ashamed", "American Pastoral", "Inferno", "Friend Request", "Moana", "Rogue One: A Star Wars Story (film)", "The Founder", "Sing", "A Monster Calls", "Rings", "Underworld: Blood Wars", "Arsenal", "Between Us", "Monster Trucks", "The Bye Bye Man", "Sleepless", "100 Streets", "The Book of Love", "Split", "xXx: Return of Xander Cage", "The Resurrection of Gavin Stone", "Trespass Against Us", "Sophie and the Rising Sun", "A Dog\'s Purpose", "Resident Evil: The Final Chapter", "Lost in Florence", "I Am Michael", "iBoy", "Rings", "The Space Between Us", "Youth in Oregon", "I Am Not Your Negro", "Growing Up Smith", "The Lego Batman Movie", "Fifty Shades Darker", "John Wick: Chapter 2", "Bornless Ones", "The Great Wall", "A Cure for Wellness", "Fist Fight", "American Fable", "XX", "Lovesong", "Get Out", "Rock Dog", "Collide", "The Girl with All the Gifts", "I Don\'t Feel at Home in This World Anymore", "Contemporary Color", "Logan", "The Shack", "Before I Fall", "Table 19", "The Last Word", "Catfight", "Donald Cried", "Kong: Skull Island", "Burning Sands", "Beauty and the Beast", "The Belko Experiment", "Song to Song", "Atomica", "All Nighter", "The Devil\'s Candy", "Power Rangers", "Life", "CHiPs", "Wilson", "Victor", "Car Dogs", "Walk of Fame", "Ghost in the Shell", "The Boss Baby", "The Zookeeper\'s Wife", "The Blackcoat\'s Daughter", "The Discovery", "Carrie Pilby", "The Case for Christ", "Smurfs: The Lost Village", "Going in Style", "Colossal", "Gifted", "Aftermath", "The Fate of the Furious", "Spark", "The Lost City of Z", "My Entire High School Sinking Into the Sea", "The Outcasts", "Born in China", "Unforgettable", "The Promise", "The Circle", "How to Be a Latin Lover", "Sleight", "Guardians of the Galaxy Vol. 2", "The Lovers", "3 Generations", "King Arthur: Legend of the Sword", "Snatched", "Lowriders", "The Wall", "Paris Can Wait", "Alien: Covenant", "Diary of a Wimpy Kid: The Long Haul", "Everything, Everything", "Wakefield", "Baywatch", "Pirates of the Caribbean: Dead Men Tell No Tales", "Buena Vista Social Club: Adios", "War Machine", "Wonder Woman", "Captain Underpants: The First Epic Movie", "Dean", "The Mummy", "It Comes at Night", "My Cousin Rachel", "Megan Leavey", "Beatriz at Dinner", "Cars 3", "Rough Night", "All Eyez on Me", "47 Meters Down", "The Book of Henry", "Transformers: The Last Knight", "The Beguiled", "The Big Sick", "The Bad Batch", "Baby Driver", "Okja", "Despicable Me 3", "The House", "The Little Hours", "Inconceivable", "0.098611111", "A Ghost Story", "Spider-Man: Homecoming", "War for the Planet of the Apes", "Wish Upon", "Valerian and the City of a Thousand Planets", "Girls Trip", "First Kill", "The Emoji Movie", "An Inconvenient Sequel: Truth to Power", "Detroit", "Brigsby Bear", "Menashe", "The Dark Tower", "Kidnap", "Step", "Wind River", "Armed Response", "Annabelle: Creation", "The Glass Castle", "The Nut Job 2: Nutty by Nature", "Good Time", "Ingrid Goes West", "The Only Living Boy in New York", "The Hitman\'s Bodyguard", "Logan Lucky", "Patti Cake$", "All Saints", "Served Like A Girl", "Beach Rats", "Tulip Fever", "Unlocked", "It", "Home Again", "43354", "The Good Catholic", "Gun Shy", "American Assassin", "Mother!", "Brad\'s Status", "Kingsman: The Golden Circle", "The Lego Ninjago Movie", "Stronger", "Battle of the Sexes", "Woodshock", "Victoria & Abdul", "Jeepers Creepers 3", "American Made", "Flatliners", "Mark Felt: The Man Who Brought Down the White House", "Blade Runner 2049", "The Mountain Between Us", "My Little Pony: The Movie", "The Florida Project", "Brawl in Cell Block 99", "Happy Death Day", "Marshall", "Breathe", "Goodbye Christopher Robin", "Professor Marston and the Wonder Women", "Blood Money", "Geostorm", "Only the Brave", "Boo 2! A Madea Halloween", "Same Kind of Different as Me", "Leatherface", "Wonderstruck", "The Killing of a Sacred Deer", "Thank You for Your Service", "Suburbicon", "Jigsaw", "Novitiate", "All I See Is You", "Amityville: The Awakening", "Thor: Ragnarok", "A Bad Moms Christmas", "Last Flag Flying", "Lady Bird", "Murder on the Orient Express", "Daddy\'s Home 2", "LBJ", "Three Billboards Outside Ebbing, Missouri", "Mayhem", "Justice League", "The Star", "Wonder", "Cook Off!", "Mr. Roosevelt", "Roman J. Israel, Esq.", "Coco", "Darkest Hour", "The Man Who Invented Christmas", "Call Me by Your Name", "The Disaster Artist", "The Shape of Water", "Wonder Wheel", "I, Tonya", "Just Getting Started", "Star Wars: The Last Jedi", "Ferdinand", "Beyond Skyline", "Jumanji: Welcome to the Jungle", "The Greatest Showman", "Pitch Perfect 3", "Downsizing", "Father Figures", "The Post", "Bright", "Crooked House", "Hostiles", "All the Money in the World", "Molly\'s Game", "Phantom Thread"];
// Thanks jonathan for example on how to save the file
var fs = require('fs');
var os = require("os");

var googleTrendsApi = require("google-trends-api")
var Promise = require("bluebird")
trends(0);

function trends(i) {
	console.log(movies[i]);
	googleTrendsApi.interestByRegion({
	keyword: movies[i],  
	resolution: 'COUNTRY'})
	.then(function(results) {
		results = JSON.parse(results);
		var arr = [];
		var data = results.default.geoMapData;
		for (var key in data) {
			d = data[key];
			var g = [];
			g.push(d.geoName, d.value);
			arr.push(g);
			arr.sort();
		}
		fs.appendFile('movies.csv', arr + os.EOL, 'utf8', function(d) {})
		if (i < movies.length) {
			setTimeout(function(){ trends(i + 1) }, 1000);
		}
	})
	.catch(function(error) {
		console.log(error);
	});   
}